<h1 class='mt-5'> 
  <span class='bi bi-people-fill'></span> Usuarios 
  <button id="btnNuevoUsuario" class="btn btn-primary float-end"><span class='bi bi-plus-square'></span> Nuevo usuario</button>
</h1>

<nav aria-label='Page navigation example'>
  <ul class='pagination justify-content-end'>
    <li class='page-item {{previous_disabled}}'>
      <a
        class='aqui-token page-link'
        href='/users/?page={{pagina_anterior}}'
        tabindex='-1'
        aria-disabled='true'
      >Anterior</a>
    </li>
    {{#each botones_paginas}}
      <li class='page-item {{#if (eq this ../pagina)}}active{{/if}}' >
        <a
          class='aqui-token page-link' 
          href='/users?page={{this}}'
        >{{this}}</a></li>
    {{/each}}
    <li class='page-item {{next_disabled}}'>
      <a
        class='aqui-token page-link'
        href='/users/?page={{pagina_posterior}}'
      >Siguiente</a>
    </li>
  </ul>
</nav>

<hr />

<table style='width: 100%'>
  <tr>
    <th class='col-1'></th>
    <th class='col-1'>ID</th>
    <th class='col-5'>Email</th>
    <th class='col-5'>Password</th>
  </tr>
  {{#each registros}}
    <tr>
      <th class='col-1'><hr /></th>
      <th class='col-1'><hr /></th>
      <th class='col-5'><hr /></th>
      <th class='col-5'><hr /></th>
    </tr>
    <tr>
      <td class='col-1'>
        <button
          class='btn btn-secondary'
          onclick="window.location = `/users/{{this.id}}?tokenparam=${localStorage.getItem('b54-token')}`"
        >
          <span class='bi bi-eye'></span>
        </button>
      </td>
      <td class='col-1'>{{this.id}}</td>
      <td class='col-5'>{{this.email}}</td>
      <td class='col-5'>{{this.pass}}</td>
    </tr>
    {{#if this.actuaciones}}
      <tr>
        <tr>
          <th></th>
          <th>Actuaci贸n</th>
          <th>Soluci贸n</th>
          <th>Creaci贸n</th>
          <th>Actualizaci贸n</th>
        </tr>
        {{#each this.actuaciones}}
          <tr>
            <td></td>
            <td>{{this.descripcion}}</td>
            <td>{{this.solucion}}</td>
            <td>{{this.created_at}}</td>
            <td>{{this.updated_at}}</td>
          </tr>
          {{#if this.file_path}}
            <tr>
              <td>
              </td>
              <td>
                <img src='{{this.file_path}}' alt='' width='100%' height='100%' />
              </td>
            </tr>
          {{/if}}
        {{/each}}

      </tr>
    {{/if}}
  {{/each}}
</table>

<hr />

<nav aria-label='Page navigation example'>
  <ul class='pagination justify-content-end'>
    <li class='page-item {{previous_disabled}}'>
      <a
        class='aqui-token page-link'
        href='/users/?page={{pagina_anterior}}'
        tabindex='-1'
        aria-disabled='true'
      >Anterior</a>
    </li>
    {{#each botones_paginas}}
      <li class='page-item {{#if (eq this ../pagina)}}active{{/if}}' >
        <a
          class='aqui-token page-link' 
          href='/users?page={{this}}'
        >{{this}}</a></li>
    {{/each}}
    <li class='page-item {{next_disabled}}'>
      <a
        class='aqui-token page-link'
        href='/users/?page={{pagina_posterior}}'
      >Siguiente</a>
    </li>
  </ul>
</nav>

<script>
  const botonNuevo = document.querySelector('#btnNuevoUsuario');
  botonNuevo.addEventListener('click', () => {
    window.location = `/users/new?tokenparam=${localStorage.getItem('b54-token')}`;
  });
</script>
